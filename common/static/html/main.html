<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="icon" href="http://127.0.0.1:8080/static/image/logo.jpg" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>学习平台</title>
    <link rel="stylesheet" href="/static/js/layui-v2.6.8/css/layui.css">
    <link rel="stylesheet" href="/static/css/config.css">
    <style>
        .component {
            position: absolute;
            width: 200px;
            left: 69%;
            top: 16px;
        }

        .component .layui-input {
            height: 30px;
            padding-left: 32px;
            padding-right: 10px;
            background-color: rgba(255, 255, 255, .05);
            border: none 0;
            color: #fff !important;
            font-size: 12px;
        }

        .component > .layui-icon {
            position: absolute;
            left: 10px;
            top: 9px;
            font-size: 12px;
            color: #fff !important;
        }

        .layui-col-md3 {
            width: 100%;
        }

        .layui-nav-tree {
            width: 200px;
            padding: 0;
            height: 100%;
            background-color: white;
            border-right: 1px solid #eee;
        }

        .layui-panel {
            border-width: 1px;
            border-style: none;
            border-radius: 2px;
            background-color: #fff;
            color: #666;
        }

        .layui-layout-admin .layui-logo {
            position: absolute;
            left: 0;
            top: 0;
            width: 200px;
            height: 100%;
            line-height: 60px;
            text-align: center;
            color: #fff !important;
            font-size: 16px;
            box-shadow: 0 0px 0px 0;
        }

        .layui-menu li {
            position: relative;
            margin: 1px 0;
            width: calc(100% + 8px);
            /*width: 200px;*/
            line-height: 30px;
            color: rgba(0, 0, 0, .8);
            font-size: 14px;
            white-space: nowrap;
            cursor: pointer;
        }
        .layui-bg-calv {
            background-color: #02b980 !important;
        }
    </style>
</head>
<body>
<div class="layui-layout layui-layout-admin">
    <div id="layui-header" class="layui-header">
        <div class="layui-logo">xiaoben内部学习系统</div>
        <!--<div class="layui-logo layui-hide-xs layui-bg-black">xiaoben内部学习系统</div>-->
        <!-- 头部区域（可配合layui 已有的水平导航） -->
        <!-- 头部菜单开始 -->
        <ul class="layui-nav layui-layout-left" id="topmenu1">
            <!-- 移动端显示 -->
            <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-header-event="menuLeft">
                <!--<li class="layui-nav-item layui-show-xs-inline-block" lay-header-event="menuLeft">-->
                <i id="spread-left" class="layui-icon layui-icon-spread-left"></i>
            </li>
            <li id="top_2" class="layui-nav-item layui-this"><a href="javascript:void(0);" onclick="topMenu(2)">课程</a>
            </li>
            <!--<li id="top_1" class="layui-nav-item"><a href="javascript:void(0);" onclick="topMenu(1)">计算机信息管理</a></li>-->
            <li id="top_3" class="layui-nav-item"><a href="javascript:void(0);" onclick="topMenu(3)">我的积分</a></li>
            <li id="top_7" class="layui-nav-item"><a href="javascript:void(0);" onclick="topMenu(7)">会员中心</a></li>
            <li id="top_4" class="layui-nav-item"><a href="javascript:void(0);" onclick="topMenu(4)">最新活动<span
                    class="layui-badge-dot"></span></a></li>
            <li id="top_5" class="layui-nav-item"><a href="javascript:void(0);">主题</a>
                <dl class="layui-nav-child">
                    <dd><a href="javascript:void(0);" onclick="mainTheme('ahei')">暗黑</a></dd>
                    <dd><a href="javascript:void(0);" onclick="mainTheme('cyan')">藏青</a></dd>
                    <dd><a href="javascript:void(0);" onclick="mainTheme('molv')">墨绿</a></dd>
                    <dd><a href="javascript:void(0);" onclick="mainTheme('calv')">草绿</a></dd>
                    <dd><a href="javascript:void(0);" onclick="mainTheme('blue')">艳蓝</a></dd>
                </dl>
            </li>
            <li id="top_6" class="layui-nav-item"><a href="javascript:void(0);" onclick="topMenu(6)">关于我们</a></li>
        </ul>

        <div class="layui-form layui-hide-xs component">
            <input type="text" autocomplete="off" class="layui-input">
            <i class="layui-icon layui-icon-search"></i>
        </div>

        <!-- 头部菜单结束 -->
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item layui-hide layui-show-md-inline-block">
                <a href="javascript:;">
                    <img id="user_logo"
                         src="//tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg"
                         class="layui-nav-img">
                    <span id="user_name">tester</span>
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="javascript:;" onclick="topMenu(9)">我的</a></dd>
                    <dd><a href="javascript:;" onclick="topMenu(10)">私信</a></dd>
                    <dd><a href="javascript:;" onclick="topMenu(11)">设置</a></dd>
                    <dd><a href="javascript:;" onclick="logout()">退出登录</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item" lay-header-event="menuRight" lay-unselect>
                <a href="javascript:;">
                    <i class="layui-icon layui-icon-more-vertical"></i>
                </a>
            </li>
        </ul>
    </div>
    <!-- 左边菜单开始 -->
    <div class="layui-side">
        <div class="layui-side-scroll">
            <ul class="layui-nav layui-nav-tree" lay-filter="test">
                <li class="layui-nav-item layui-nav-itemed">
                    <div class="layui-col-xs9 layui-col-md3">
                        <div class="layui-panel">
                            <ul class="layui-menu" id="topic" hidden></ul>
                            <ul class="layui-menu" id="subject">
                                <li class="layui-menu-item-divider"></li>
                                <li class="layui-menu-item-group layui-menu-item-down" lay-options="{type: 'group'}">
                                    <div class="layui-menu-body-title">课程<i class="layui-icon layui-icon-up"></i></div>
                                    <ul>
                                        <li lay-options="{id: 'all_subject'}">
                                            <div class="layui-menu-body-title">所有课程</div>
                                        </li>
                                        <li lay-options="{id: 'user_subject'}">
                                            <div class="layui-menu-body-title">我的课程</div>
                                        </li>
                                    </ul>
                                </li>
                                <li class="layui-menu-item-divider"></li>
                            </ul>
                            <ul class="layui-menu" id="integral" hidden>
                                <li class="layui-menu-item-divider"></li>
                                <li class="layui-menu-item-group layui-menu-item-down" lay-options="{type: 'group'}">
                                    <div class="layui-menu-body-title">积分<i class="layui-icon layui-icon-up"></i></div>
                                    <ul>
                                        <li>
                                            <div class="layui-menu-body-title">积分商城</div>
                                        </li>
                                        <li>
                                            <div class="layui-menu-body-title">我的积分</div>
                                        </li>
                                        <li>
                                            <div class="layui-menu-body-title">积分记录</div>
                                        </li>
                                    </ul>
                                </li>
                                <li class="layui-menu-item-divider"></li>
                            </ul>
                            <ul class="layui-menu" id="activity" hidden>
                                <li class="layui-menu-item-divider"></li>
                                <li class="layui-menu-item-group layui-menu-item-down" lay-options="{type: 'group'}">
                                    <div class="layui-menu-body-title">活动<i class="layui-icon layui-icon-up"></i></div>
                                    <ul>
                                        <li>
                                            <div class="layui-menu-body-title">全部活动</div>
                                        </li>
                                        <li>
                                            <div class="layui-menu-body-title">我的参与</div>
                                        </li>
                                        <li>
                                            <div class="layui-menu-body-title">参与记录</div>
                                        </li>
                                    </ul>
                                </li>
                                <li class="layui-menu-item-divider"></li>
                            </ul>
                            <ul class="layui-menu" id="about" hidden>
                                <li class="layui-menu-item-divider"></li>
                                <li class="layui-menu-item-group layui-menu-item-down" lay-options="{type: 'group'}">
                                    <div class="layui-menu-body-title">关于<i class="layui-icon layui-icon-up"></i></div>
                                    <ul>
                                        <li>
                                            <div class="layui-menu-body-title">了解本站</div>
                                        </li>
                                        <li>
                                            <div class="layui-menu-body-title">咨询</div>
                                        </li>
                                    </ul>
                                </li>
                                <li class="layui-menu-item-divider"></li>
                            </ul>
                            <ul class="layui-menu" id="user" hidden>
                                <li class="layui-menu-item-divider"></li>
                                <li class="layui-menu-item-group layui-menu-item-down" lay-options="{type: 'group'}">
                                    <div class="layui-menu-body-title">我的<i class="layui-icon layui-icon-up"></i></div>
                                    <ul>
                                        <!--<li>
                                            <div class="layui-menu-body-title">我的主页</div>
                                        </li>-->
                                        <li lay-options="{id: 'personal_information'}">
                                            <div class="layui-menu-body-title">个人信息</div>
                                        </li>
                                        <li lay-options="{id: 'change_password'}">
                                            <div class="layui-menu-body-title">修改密码</div>
                                        </li>
                                        <li lay-options="{id: 'login_history'}">
                                            <div class="layui-menu-body-title">登录记录</div>
                                        </li>
                                        <li lay-options="{id: 'my_orders'}">
                                            <div class="layui-menu-body-title">我的订单</div>
                                        </li>
                                        <li lay-options="{id: 'learn_record'}">
                                            <div class="layui-menu-body-title">学习记录</div>
                                        </li>
                                        <!--<li>
                                            <div class="layui-menu-body-title">其它信息</div>
                                        </li>-->
                                    </ul>
                                </li>
                                <li class="layui-menu-item-divider"></li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <!-- 左边菜单结束 -->
    <div class="layui-body">
        <!-- 内容主体区域 -->
        <!--<div style="padding: 15px;">内容主体区域</div>-->
        <iframe width="100%" id="iframe" height="100%" src="" frameborder="0" border="0" marginwidth="0"
                marginheight="0" scrolling="yes" allowtransparency="yes"></iframe>
    </div>

    <div class="layui-footer">
        <!-- 底部固定区域 -->
        <div style="text-align:center;">xiaoben内部学习平台，仅供学习使用，严禁用作其他用途，违者必究！投诉建议请联系：xiaoben.mail@foxmail.com</div>
    </div>
</div>

<script src="/static/js/layui-v2.6.8/layui.js"></script>
<script type="text/javascript" src="/static/js/jquery-2.1.3.js"></script>
<script src="/static/js/config.js" charset="utf-8"></script>
<script>
    //JavaScript代码区域
    layui.use(['layer', 'element', 'form', 'util', 'dropdown'], function () {
        let element = layui.element;
        let form = layui.form;
        let layer = layui.layer;
        let util = layui.util;
        let dropdown = layui.dropdown;

        //专业菜单点击事件
        dropdown.on('click(topic)', function (options) {
            let thisElem = $(this);
            console.log(thisElem);
        });

        //课程菜单点击事件
        dropdown.on('click(subject)', function (options) {
            switch (options.id) {
                case "all_subject":
                    document.getElementById("iframe").src = '/subject/list.html'
                    break
                case "user_subject":
                    document.getElementById("iframe").src = '/subject/user_sub_list.html'
                    break
            }
        });

        //课程菜单点击事件
        dropdown.on('click(user)', function (options) {
            switch (options.id) {
                case "personal_information":
                    document.getElementById("iframe").src = '/user_html/information.html'
                    break
                case "change_password":
                    document.getElementById("iframe").src = '/user_html/change_password.html'
                    break
                case "login_history":
                    document.getElementById("iframe").src = '/user_html/login_history.html'
                    break
                case "my_orders":
                    document.getElementById("iframe").src = '/user_html/order.html'
                    break
                case "learn_record":
                    document.getElementById("iframe").src = '/user_html/learn_record.html'
                    break
            }
        });

        util.event('lay-active', {
            normal: function () {
                $('#demo-box').children().addClass('layui-col-md3').removeClass('layui-col-md4');
                $('#demo-box').find('.layui-menu').removeClass('layui-menu-lg');
            }
            , lg: function () {
                $('#demo-box').children().addClass('layui-col-md4').removeClass('layui-col-md3')
                $('#demo-box').find('.layui-menu').addClass('layui-menu-lg');
            }
        });

        //头部事件
        util.event('lay-header-event', {
            //左侧菜单事件
            menuLeft: function (othis) {
                layer.msg('展开左侧菜单的操作', {icon: 0});
            },
            menuRight: function () {
                layer.open({
                    type: 1,
                    title: "系统消息",
                    content: '<div style="padding: 15px;">xiaoben内部学习系统已上线</div>',
                    area: ['260px', '100%'],
                    offset: 'rt', //右上角
                    anim: 2,
                    shadeClose: true,
                });
            }
        });

        //获取主题信息
        window.initTheme = function () {
            let themes = localStorage.getItem("main_theme");
            if (themes != null && themes != undefined) {
                $("#layui-header").addClass(themes)
            }
        }
        initTheme()

        //设置用户个人信息
        window.initUser = function () {
            let image = localStorage.getItem("user_image");
            let name = localStorage.getItem("user_name");
            let account = localStorage.getItem("account");
            if (image == null || image == undefined || image == '') {
                image = "https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fblog%2F202106%2F05%2F20210605015054_1afb0.thumb.1000_0.jpeg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1675878581&t=3284c8effe31c3d5b1672007253e5772"
            }
            if (name == null || name == undefined || name == '') {
                name = account
            }
            $("#user_logo").attr("src", image)
            $("#user_name").text(name)
        }
        initUser()

        /*//初始化左侧菜单
        window.initLeftMenu = function () {
            let params = '{"type":1}'
            let token = localStorage.getItem("token");
            let data = sendApi(url_get_sub_list, params, "POST", token)
            if (data.code == 0) {
                let result = data.data;
                let str = ''
                for (let i = 0; i < result.length; i++) {
                    let chapter = result[i].chapter;
                    if (chapter.length == 0) {
                        str +=
                            '<li lay-options="{id: 100}">' +
                            '<div class="layui-menu-body-title">' + result[i].subject_name + '</div>' +
                            '</li>'
                    } else {
                        str +=
                            '<li class="layui-menu-item-divider"></li>' +
                            '<li class="layui-menu-item-group layui-menu-item-down" lay-options="{type: \'group\'}">' +
                            '<div class="layui-menu-body-title">' + result[i].subject_name + '<i class="layui-icon layui-icon-up"></i></div>' +
                            '<ul>'
                        for (let y = 0; y < chapter.length; y++) {
                            str +=
                                '<li>' +
                                '<div class="layui-menu-body-title">' + chapter[y].name + '</div>' +
                                '</li>'
                        }
                        str += '</ul>' +
                            '</li>' +
                            '<li class="layui-menu-item-divider"></li>'
                    }
                }
                $("#topic").html(str)
                element.render()
            }
        }
        //initLeftMenu()*/

        window.mainTheme = function (type) {
            //删除原有的主题
            localStorage.removeItem("main_theme")
            switch (type) {
                case 'cyan':
                    $("#layui-header").removeClass('layui-bg-green')
                    $("#layui-header").removeClass('layui-bg-calv')
                    $("#layui-header").removeClass('layui-bg-blue')
                    $("#layui-header").addClass('layui-bg-cyan')
                    localStorage.setItem("main_theme", 'layui-bg-cyan')
                    break
                case 'molv':
                    $("#layui-header").removeClass('layui-bg-cyan')
                    $("#layui-header").removeClass('layui-bg-blue')
                    $("#layui-header").removeClass('layui-bg-calv')
                    $("#layui-header").addClass('layui-bg-green')
                    localStorage.setItem("main_theme", 'layui-bg-green')
                    break
                case 'calv':
                    $("#layui-header").removeClass('layui-bg-green')
                    $("#layui-header").removeClass('layui-bg-cyan')
                    $("#layui-header").removeClass('layui-bg-blue')
                    $("#layui-header").addClass('layui-bg-calv')
                    localStorage.setItem("main_theme", 'layui-bg-calv')
                    break
                case 'blue':
                    $("#layui-header").removeClass('layui-bg-cyan')
                    $("#layui-header").removeClass('layui-bg-green')
                    $("#layui-header").removeClass('layui-bg-calv')
                    $("#layui-header").addClass('layui-bg-blue')
                    localStorage.setItem("main_theme", 'layui-bg-blue')
                    break
                case 'ahei':
                    $("#layui-header").removeClass('layui-bg-cyan')
                    $("#layui-header").removeClass('layui-bg-green')
                    $("#layui-header").removeClass('layui-bg-blue')
                    $("#layui-header").removeClass('layui-bg-calv')
                    break
            }
        }
        window.topMenu = function (sort) {
            switch (sort) {
                case 1:
                    $("#subject").hide()
                    $("#integral").hide()
                    $("#activity").hide()
                    $("#about").hide()
                    $("#topic").show()
                    $("#user").hide()
                    document.getElementById("iframe").src = '/topic/list.html'
                    break
                case 2:
                    $("#subject").show()
                    $("#integral").hide()
                    $("#activity").hide()
                    $("#about").hide()
                    $("#topic").hide()
                    $("#user").hide()
                    document.getElementById("iframe").src = '/subject/list.html'
                    break
                case 3:
                    $("#subject").hide()
                    $("#integral").show()
                    $("#activity").hide()
                    $("#about").hide()
                    $("#topic").hide()
                    $("#user").hide()
                    document.getElementById("iframe").src = '/integral/list.html'
                    break
                case 4:
                    $("#subject").hide()
                    $("#integral").hide()
                    $("#activity").show()
                    $("#about").hide()
                    $("#topic").hide()
                    $("#user").hide()
                    document.getElementById("iframe").src = '/activity/list.html'
                    break
                case 6:
                    $("#subject").hide()
                    $("#integral").hide()
                    $("#activity").hide()
                    $("#about").show()
                    $("#topic").hide()
                    $("#user").hide()
                    document.getElementById("iframe").src = '/about/list.html'
                    break
                case 9:
                    $("#subject").hide()
                    $("#integral").hide()
                    $("#activity").hide()
                    $("#about").hide()
                    $("#topic").hide()
                    $("#user").show()
                    document.getElementById("iframe").src = '/user_html/information.html'
                    break
            }
        }
        topMenu(2)
        
        window.logout = function () {
            localStorage.removeItem("token")
        }
    });
</script>
</body>
</html>